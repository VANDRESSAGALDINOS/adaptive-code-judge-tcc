FROM python:3.11-slim

RUN apt-get update && apt-get install -y \
    time \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /workspace

# Memory and time limits
RUN echo "ulimit -v 131072" >> /etc/bash.bashrc  # 128MB virtual memory
RUN echo "ulimit -t 30" >> /etc/bash.bashrc     # 30 second CPU time

COPY docker/run_python.sh /usr/local/bin/run_python.sh
RUN chmod +x /usr/local/bin/run_python.sh

CMD ["/bin/bash"]
